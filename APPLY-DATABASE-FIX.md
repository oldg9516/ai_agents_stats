# üö® –í–ê–ñ–ù–û: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å—á–µ—Ç–∞ –º–µ—Ç—Ä–∏–∫

## –ü—Ä–æ–±–ª–µ–º–∞

–í —Ç–∞–±–ª–∏—Ü–µ –Ω–∞ –¥–∞—à–±–æ—Ä–¥–µ **–ö–†–ò–¢–ò–ß–ï–°–ö–ò –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û** —Å—á–∏—Ç–∞–ª–∏—Å—å –º–µ—Ç—Ä–∏–∫–∏:

- ‚ùå `total_records` –ø–æ–∫–∞–∑—ã–≤–∞–ª —Ç–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–∏ –∫–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤
- ‚ùå `records_qualified_agents` –ø–æ–∫–∞–∑—ã–≤–∞–ª —Ç–æ –∂–µ —Å–∞–º–æ–µ, —á—Ç–æ –∏ `total_records`
- ‚ùå –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –±—ã–ª–æ —É–≤–∏–¥–µ—Ç—å —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫ –æ–±—â–µ–º—É —á–∏—Å–ª—É

## –†–µ—à–µ–Ω–∏–µ

–°–æ–∑–¥–∞–Ω SQL —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–∞—Å—á–µ—Ç:

- ‚úÖ `total_records` = **–í–°–ï** –∑–∞–ø–∏—Å–∏ (COUNT(*))
- ‚úÖ `records_qualified_agents` = —Ç–æ–ª—å–∫–æ –∫–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã
- ‚úÖ `changed_records` = —Ç–æ–ª—å–∫–æ changed –æ—Ç –∫–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö
- ‚úÖ `good_percentage` = (unchanged qualified / total qualified) √ó 100

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü—Ä–∏–º–µ–Ω–∏—Ç—å SQL —Å–∫—Ä–∏–ø—Ç –≤ Supabase

1. –û—Ç–∫—Ä–æ–π [Supabase Dashboard](https://supabase.com/dashboard)
2. –í—ã–±–µ—Ä–∏ –ø—Ä–æ–µ–∫—Ç LevHaolam
3. SQL Editor ‚Üí New Query
4. –°–∫–æ–ø–∏—Ä—É–π **–í–ï–°–¨** –∫–æ–¥ –∏–∑ —Ñ–∞–π–ª–∞ `database-fix-records-calculation.sql`
5. –í—Å—Ç–∞–≤—å –∏ –Ω–∞–∂–º–∏ **Run** (Cmd/Ctrl + Enter)
6. –£–±–µ–¥–∏—Å—å, —á—Ç–æ –≤—ã–ø–æ–ª–Ω–∏–ª–æ—Å—å –±–µ–∑ –æ—à–∏–±–æ–∫

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç

1. –û—Ç–∫—Ä–æ–π –¥–∞—à–±–æ—Ä–¥: `http://localhost:3000/dashboard`
2. –ü—Ä–æ–≤–µ—Ä—å —Ç–∞–±–ª–∏—Ü—É - —Ç–µ–ø–µ—Ä—å –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

**–ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:**
```
Category: gratitude, v1, 22.09.2025 ‚Äî 28.09.2025
Total Records: 294          ‚Üê –í–°–ï –∑–∞–ø–∏—Å–∏
Qualified Agents: 134       ‚Üê –¢–æ–ª—å–∫–æ –∫–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ (–º–µ–Ω—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ Total)
Records Changed: 24         ‚Üê Changed –æ—Ç –∫–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö
Good %: 82%                 ‚Üê (110 unchanged / 134 qualified) √ó 100
```

**–ü—Ä–∏–º–µ—Ä –∫–æ–≥–¥–∞ –Ω–µ—Ç –∫–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö:**
```
Category: payment_question, v2, 03.11.2025 ‚Äî 09.11.2025
Total Records: 184          ‚Üê –í–°–ï –∑–∞–ø–∏—Å–∏
Qualified Agents: 0         ‚Üê –ù–µ—Ç –∫–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö
Records Changed: 0          ‚Üê –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö
Good %: 0%                  ‚Üê –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞
```

### 3. –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ –∫–æ–¥–µ (—É–∂–µ —Å–¥–µ–ª–∞–Ω–æ)

‚úÖ React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞—Ç `DD.MM.YYYY ‚Äî DD.MM.YYYY`
‚úÖ –§—É–Ω–∫—Ü–∏—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–∞—Ç

## –§–∞–π–ª—ã

- **`database-fix-records-calculation.sql`** - SQL —Å–∫—Ä–∏–ø—Ç –¥–ª—è Supabase (–ü–†–ò–ú–ï–ù–ò–¢–¨!)
- **`database-fix-records-calculation-README.md`** - –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **`components/tables/detailed-stats-table.tsx`** - –û–±–Ω–æ–≤–ª–µ–Ω (—É–∂–µ –≥–æ—Ç–æ–≤)

## –ß—Ç–æ –¥–∞–ª—å—à–µ?

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è SQL —Å–∫—Ä–∏–ø—Ç–∞ –≤—Å–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ! üéâ

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –ø—Ä–æ–±–ª–µ–º—ã, —Å–º–æ—Ç—Ä–∏ –ø–æ–¥—Ä–æ–±–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ `database-fix-records-calculation-README.md`.
